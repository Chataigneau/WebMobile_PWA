<!DOCTYPE html>
<html class="html">

	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Chatai Gallery</title>
		<h1 class="titre" style="font-size:2vw;">Galerie PWA</h1>
		<link rel="manifest" href="manifest.webmanifest" />
		<link rel="apple-touch-icon" href="/icon-192x192.png">
        <link rel="stylesheet" href="index.css"/>
		
		<script
      		async
     		src="https://cdn.jsdelivr.net/npm/pwacompat@2.0.9/pwacompat.min.js"
      		integrity="sha384-VcI6S+HIsE80FVM1jgbd6WDFhzKYA0PecD/LcIyMQpT4fMJdijBh0I7Iblaacawc"
      		crossorigin="anonymous"
		></script>

        <script>
      	if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/sw.js",{updateViaCache: 'none'})
          .then((reg) => {
            console.log("Votre service worker a été enregistré!");
			reg.addEventListener('updatefound', () => { 
				const installing = reg.installing;
				installing.addEventListener('statechange', () => { 
				if(installing.state === 'installed'){ 
					 // Afficher un message aux utilisateurs 
					 console.log("Votre service worker a été mis à jour! Veuillez rafraîchir la page"); 
				} 
			}); 
			});
		  
		  })
          .catch((error) => {
            console.error(error);
          });
      } else {
        console.warn("Service workers are not supported.");
      }
    </script>

    <script src="./script.js"></script>

	</head>

	<body class="body">
		<div class="notification" style="max-width:100%;height:auto;">
      Vous êtes hors ligne.
    </div>
    
		<button id="button" class="button" style="max-width:100%;height:auto;">
			Installer
		</button>

		<div class ="gallery" style="max-width:100%;height:auto;"></div>

    </body>


	<footer class="footer">
        <div style="max-width:100%;height:auto;">
            <p>Email : nicolas.chataigneau@ynov.com</p>
            <p>Téléphone : 01 23 45 67 89</p>
        </div>
    </footer>
	
</html>